<script type="text/javascript">
    function isNumber(n){
    return typeof(n) != "boolean" && !isNaN(n);
}
</script>
<script type="text/javascript">

    $(document).ready(function(){
        $('#LoanCalculateButt').click(function(){

            var strAdvancedCapital = document.getElementById('strCreditAdvanceCapital').value;
            var strInitiationFee = document.getElementById('strInitiationFee').value;
            var strMonthlyFee = document.getElementById('strMonthlyFee').value;
            var strMonthlyInterestRate = document.getElementById('strMonthlyInterestRate').value;
            var strFreequency = document.getElementById('strFreequency').value;
            var strNumberInstallments = document.getElementById('strNumberInstallments').value;
            var strLoanTerm = document.getElementById('strLoanTerm').value;
            var strAmountAdvancedToClient = document.getElementById('strAmountAdvancedToClient').value;
            var strTotalInstallments = document.getElementById('strTotalInstallments').value;
            var isNumberAdvancedCapital = isNumber(strAdvancedCapital);
            if (isNumberAdvancedCapital == true){
                var ActualInitiationFee = ((strInitiationFee/100) * strAdvancedCapital );
                var tempTotal = parseInt(strAdvancedCapital) + parseInt(ActualInitiationFee) + parseInt(strMonthlyFee);
                document.getElementById('strAmountAdvancedToClient').value = tempTotal;
                var tempTotal = parseInt(tempTotal) + parseInt((strMonthlyInterestRate/100) * tempTotal );
                document.getElementById('strMonthlyInstallment').value = Math.round(parseInt(tempTotal) / parseInt(strNumberInstallments));
                document.getElementById('strTotalInstallments').value = document.getElementById('strMonthlyInstallment').value * parseInt(strNumberInstallments);
            }else{
                alert("Enter a real Advanced Capital Amount")
            }
          });
      });
</script>

<script type="text/javascript">
    $(document).ready(function(){
        $('#SaveAdvancedAmountButt').click(function(){
            var vstrAccountNumber = document.getElementById('strAccountNumber').value;
            var vstrCreditAdvanceCapital = document.getElementById('strCreditAdvanceCapital').value;
            var vstrInitiationFee = document.getElementById('strInitiationFee').value;
            var vstrMonthlyFee = document.getElementById('strMonthlyFee').value;
            var vstrMonthlyInterestRate = document.getElementById('strMonthlyInterestRate').value;
            var vstrFreequency = document.getElementById('strFreequency').value;
            var vstrNumberInstallments = document.getElementById('strNumberInstallments').value;
            var vstrLoanTerm = document.getElementById('strLoanTerm').value;
            var vstrAmountAdvancedToClient = document.getElementById('strAmountAdvancedToClient').value;
            var vstrMonthlyInstallment = document.getElementById('strMonthlyInstallment').value;
            var vstrTotalInstallments = document.getElementById('strTotalInstallments').value;


            var dataString = '&vstrAccountNumber=' + vstrAccountNumber + '&vstrCreditAdvanceCapital='+ vstrCreditAdvanceCapital +
                    '&vstrInitiationFee=' + vstrInitiationFee + '&vstrMonthlyFee=' + vstrMonthlyFee + '&vstrMonthlyInterestRate=' + vstrMonthlyInterestRate +
                    '&vstrFreequency=' + vstrFreequency + '&vstrNumberInstallments=' + vstrNumberInstallments + '&vstrLoanTerm=' + vstrLoanTerm +
                    '&vstrAmountAdvancedToClient=' + vstrAmountAdvancedToClient + '&vstrMonthlyInstallment=' + vstrMonthlyInstallment +
                    '&vstrTotalInstallments='+ vstrTotalInstallments;
              $.ajax({
                    type: "post",
                    url: "/loans/advancedamount",
                    data: dataString,
                    cache: false,
                  success: function(html){
                    $('#AdvanceAmountDIVINF').html(html)

                  }
              });
        });
    });
</script>

<div class="box">
    <div class="box box-info">
        <div class="box box-title">
            <h3>Advanced Amount</h3>
        </div>

        <form class="form-horizontal" id="AdvancedAmount" action="" method="post">

            <div class="form-group">
                 <label for="strCreditAdvanceCapital" class="col-sm-3 control-label pull-left" title="">Credit Advanced Capital</label>
                <div class="col-sm-9">
                    {% if Advanced.strCreditAdvancedCapital == None %}
                        <input type="text" class="form-control" id="strCreditAdvanceCapital" name="vstrCreditAdvanceCapital" value="0">
                    {% else %}
                        <input type="text" class="form-control" id="strCreditAdvanceCapital" name="vstrCreditAdvanceCapital" value="{{ Advanced.strCreditAdvancedCapital }}">
                    {% endif %}
                </div>
            </div>

            <div class="form-group">
                 <label for="strInitiationFee" class="col-sm-3 control-label pull-left" title="">Initiation Fee</label>
                <div class="col-sm-9">
                    <select id="strInitiationFee">
                        {% if Advanced.strInitiationFee == "8" %}
                            <option value="8" selected="selected">8%</option>
                        {% else %}
                            <option value="8">8%</option>
                        {% endif %}

                        {% if Advanced.strInitiationFee == "9" %}
                            <option value="9" selected="selected">9%</option>
                        {% else %}
                            <option value="9">9%</option>
                        {% endif %}

                        {% if Advanced.strInitiationFee == "10" %}
                            <option value="10" selected="selected">10%</option>
                        {% else %}
                            <option value="10">10%</option>
                        {% endif %}



                        {% if Advanced.strInitiationFee == "11" %}
                            <option value="11" selected="selected">11%</option>
                        {% else %}
                            <option value="11">11%</option>
                        {% endif %}

                        {% if Advanced.strInitiationFee == "12" %}
                            <option value="12" selected="selected">12%</option>
                        {% else %}
                            <option value="12">12%</option>
                        {% endif %}

                        {% if Advanced.strInitiationFee == "13" %}
                            <option value="13" selected="selected">13%</option>
                        {% else %}
                            <option value="13">13%</option>
                        {% endif %}


                        {% if Advanced.strInitiationFee == "14" %}
                            <option value="14" selected="selected">14%</option>
                        {% else %}
                            <option value="14">14%</option>
                        {% endif %}

                        {% if Advanced.strInitiationFee == "15" %}
                            <option value="15" selected="selected">15%</option>
                        {% else %}
                            <option value="15">15%</option>
                        {% endif %}
                    </select>

                </div>
            </div>

            <div class="form-group">
                 <label for="strMonthlyFee" class="col-sm-3 control-label pull-left" title="">Monthly Service Fee</label>
                <div class="col-sm-9">
                    <select id="strMonthlyFee">
                        {% if Advanced.strMonthlyServiceFee == "30" %}
                            <option value="30" selected="selected">R 30.00</option>
                        {% else %}
                            <option value="30">R 30.00</option>
                        {% endif %}

                        {% if Advanced.strMonthlyServiceFee == "40" %}
                            <option value="40" selected="selected">R 40.00</option>
                        {% else %}
                            <option value="40">R 40.00</option>
                        {% endif %}

                        {% if Advanced.strMonthlyServiceFee == "50" %}
                            <option value="50" selected="selected">R 50.00</option>
                        {% else %}
                            <option value="50">R 50.00</option>
                        {% endif %}

                        {% if Advanced.strMonthlyServiceFee == "50" %}
                            <option value="60" selected="selected">R 60.00</option>
                        {% else %}
                            <option value="60">R 60.00</option>
                        {% endif %}
                    </select>
                </div>
            </div>

            <div class="form-group">
                 <label for="strMonthlyInterestRate" class="col-sm-3 control-label pull-left" title="">Monthly Interest</label>
                <div class="col-sm-9">
                    <select id="strMonthlyInterestRate">
                        {% if Advanced.strMonthlyInterest == "5" %}
                            <option value="5" selected="selected">5%</option>
                        {% else %}
                            <option value="5">5%</option>
                        {% endif %}

                        {% if Advanced.strMonthlyInterest == "6" %}
                            <option value="6" selected="selected">6%</option>
                        {% else %}
                            <option value="6">6%</option>
                        {% endif %}

                        {% if Advanced.strMonthlyInterest == "7" %}
                            <option value="7" selected="selected">7%</option>
                        {% else %}
                            <option value="7">7%</option>
                        {% endif %}

                        {% if Advanced.strMonthlyInterest == "8" %}
                            <option value="8" selected="selected">8%</option>
                        {% else %}
                            <option value="8">8%</option>
                        {% endif %}

                        {% if Advanced.strMonthlyInterest == "9" %}
                            <option value="9" selected="selected">9%</option>
                        {% else %}
                            <option value="9">9%</option>
                        {% endif %}

                        {% if Advanced.strMonthlyInterest == "10" %}
                            <option value="10" selected="selected">10%</option>
                        {% else %}
                            <option value="10">10%</option>
                        {% endif %}

                        {% if Advanced.strMonthlyInterest == "11" %}
                            <option value="11" selected="selected">11%</option>
                        {% else %}
                            <option value="11">11%</option>
                        {% endif %}

                        {% if Advanced.strMonthlyInterest == "12" %}
                            <option value="12" selected="selected">12%</option>
                        {% else %}
                            <option value="12">12%</option>
                        {% endif %}

                        {% if Advanced.strMonthlyInterest == "13" %}
                            <option value="13" selected="selected">13%</option>
                        {% else %}
                            <option value="13">13%</option>
                        {% endif %}

                        {% if Advanced.strMonthlyInterest == "14" %}
                            <option value="14" selected="selected">14%</option>
                        {% else %}
                            <option value="14">14%</option>
                        {% endif %}

                        {% if Advanced.strMonthlyInterest == "15" %}
                            <option value="15" selected="selected">15%</option>
                        {% else %}
                            <option value="15">15%</option>
                        {% endif %}

                    </select>
                </div>
            </div>

            <div class="form-group">
                 <label for="strFreequency" class="col-sm-3 control-label pull-left" title="">Freequency</label>
                <div class="col-sm-9">
                    <select id="strFreequency">
                        {% if Advanced.strFreequency == "Weekly" %}
                            <option value="Weekly" selected="selected">Weekly</option>
                        {% else %}
                            <option value="Weekly">Weekly</option>
                        {% endif %}

                        {% if Advanced.strFreequency == "Monthly" %}
                            <option value="Monthly" selected="selected">Monthly</option>
                        {% else %}
                            <option value="Monthly">Monthly</option>
                        {% endif %}

                        {% if Advanced.strFreequency == "Yearly" %}
                            <option value="Yearly" selected="selected">Yearly</option>
                        {% else %}
                            <option value="Yearly">Yearly</option>
                        {% endif %}
                    </select>
                </div>
            </div>

            <div class="form-group">
                 <label for="strNumberInstallments" class="col-sm-3 control-label pull-left" title="">Number Installments</label>
                <div class="col-sm-9">
                    <select id="strNumberInstallments">
                        {% if Advanced.strNumberInstallments == "1" %}
                            <option value="1" selected="selected">1</option>
                        {% else %}
                            <option value="1">1</option>
                        {% endif %}

                        {% if Advanced.strNumberInstallments == "2" %}
                            <option value="2" selected="selected">2</option>
                        {% else %}
                            <option value="2">2</option>
                        {% endif %}

                        {% if Advanced.strNumberInstallments == "3" %}
                            <option value="3" selected="selected">3</option>
                        {% else %}
                            <option value="3">3</option>
                        {% endif %}

                        {% if Advanced.strNumberInstallments == "4" %}
                            <option value="4" selected="selected">4</option>
                        {% else %}
                            <option value="4">4</option>
                        {% endif %}

                        {% if Advanced.strNumberInstallments == "5" %}
                            <option value="5" selected="selected">5</option>
                        {% else %}
                            <option value="5">5</option>
                        {% endif %}

                        {% if Advanced.strNumberInstallments == "6" %}
                            <option value="6" selected="selected">6</option>
                        {% else %}
                            <option value="6">6</option>
                        {% endif %}
                    </select>
                </div>
            </div>

            <div class="form-group">
                 <label for="strLoanTerm" class="col-sm-3 control-label pull-left" title="">Loan Term</label>
                <div class="col-sm-9">
                    <select id="strLoanTerm">
                        {% if Advanced.strLoanTerm == "Short" %}
                            <option value="Short" selected="selected">Short Term</option>
                        {% else %}
                            <option value="Short">Short Term</option>
                        {% endif %}

                        {% if Advanced.strLoanTerm == "Long" %}
                            <option value="Long" selected="selected">Long Term</option>
                        {% else %}
                            <option value="Long">Long Term</option>
                        {% endif %}
                    </select>
                </div>
            </div>


            <div class="form-group">
                 <label for="strAmountAdvancedToClient" class="col-sm-3 control-label pull-left" title="">Amount Advanced to Client</label>
                <div class="col-sm-9">
                    {% if Advanced.strAmountAdvancedToClient == None %}
                        <input type="text" class="form-control" id="strAmountAdvancedToClient" name="vstrAmountAdvancedToClient" placeholder="Calculated Value">
                    {% else %}
                        <input type="text" class="form-control" id="strAmountAdvancedToClient" name="vstrAmountAdvancedToClient" value="{{ Advanced.strAmountAdvancedToClient }}">
                    {% endif %}
                </div>
            </div>
            <div class="form-group">
                 <label for="strMonthlyInstallment" class="col-sm-3 control-label pull-left" title="">Monthly Installments</label>
                <div class="col-sm-9">
                    {% if Advanced.strMonthlyInstallments == None %}
                        <input type="text" class="form-control" id="strMonthlyInstallment" name="vstrMonthlyInstallment" placeholder="Calculated Value">
                    {% else %}
                        <input type="text" class="form-control" id="strMonthlyInstallment" name="vstrMonthlyInstallment" value="{{ Advanced.strMonthlyInstallments }}">
                    {% endif %}
                </div>

            </div>
            <div class="form-group">
                 <label for="strTotalInstallments" class="col-sm-3 control-label pull-left" title="">Total Installments</label>
                <div class="col-sm-9">
                    {% if Advanced.strTotalInstallments == None %}
                        <input type="text" class="form-control" id="strTotalInstallments" name="vstrTotalInstallments" placeholder="Calculated Value">
                    {% else %}
                        <input type="text" class="form-control" id="strTotalInstallments" name="vstrTotalInstallments" value="{{ Advanced.strTotalInstallments }}">
                    {% endif %}
                </div>
            </div>

            <div class="form-group">
                <button type="button" class="btn btn-bitbucket btn-block margin-bottom" id="LoanCalculateButt"><i class="fa  fa-calculator"> </i> Calculate </button>
                <button type="button" class="btn btn-success btn-block margin-bottom" id="SaveAdvancedAmountButt"><i class="fa fa-save"></i> Save</button>

            </div>

        </form>
    <div class="box box-comments">
        <div id="AdvanceAmountDIVINF">

        </div>
    </div>
    </div>
</div>